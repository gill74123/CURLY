(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ebd62fcc"],{2532:function(e,t,c){"use strict";var n=c("23e7"),r=c("e330"),o=c("5a34"),i=c("1d80"),a=c("577e"),s=c("ab13"),d=r("".indexOf);n({target:"String",proto:!0,forced:!s("includes")},{includes:function(e){return!!~d(a(i(this)),a(o(e)),arguments.length>1?arguments[1]:void 0)}})},"44e7":function(e,t,c){var n=c("861d"),r=c("c6b6"),o=c("b622"),i=o("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==r(e))}},"5a34":function(e,t,c){var n=c("da84"),r=c("44e7"),o=n.TypeError;e.exports=function(e){if(r(e))throw o("The method doesn't accept regular expressions");return e}},"89ba":function(e,t,c){"use strict";c("c740"),c("a434"),c("e9c4");t["a"]={data:function(){return{favorite:JSON.parse(localStorage.getItem("favorite"))||[]}},methods:{toggleFavorite:function(e){var t=this.favorite.findIndex((function(t){return t===e}));-1===t?(this.favorite.push(e),this.$httpMessageState(!0,"加入收藏")):(this.favorite.splice(t,1),this.$httpMessageState(!0,"移除收藏")),this.$emitter.emit("toggle-favorite",this.favorite)}},watch:{favorite:{handler:function(){localStorage.setItem("favorite",JSON.stringify(this.favorite))},deep:!0}}}},"99af":function(e,t,c){"use strict";var n=c("23e7"),r=c("da84"),o=c("d039"),i=c("e8b5"),a=c("861d"),s=c("7b0b"),d=c("07fa"),l=c("8418"),u=c("65f0"),p=c("1dde"),f=c("b622"),b=c("2d00"),m=f("isConcatSpreadable"),h=9007199254740991,v="Maximum allowed index exceeded",g=r.TypeError,O=b>=51||!o((function(){var e=[];return e[m]=!1,e.concat()[0]!==e})),j=p("concat"),y=function(e){if(!a(e))return!1;var t=e[m];return void 0!==t?!!t:i(e)},k=!O||!j;n({target:"Array",proto:!0,forced:k},{concat:function(e){var t,c,n,r,o,i=s(this),a=u(i,0),p=0;for(t=-1,n=arguments.length;t<n;t++)if(o=-1===t?i:arguments[t],y(o)){if(r=d(o),p+r>h)throw g(v);for(c=0;c<r;c++,p++)c in o&&l(a,p,o[c])}else{if(p>=h)throw g(v);l(a,p++,o)}return a.length=p,a}})},ab13:function(e,t,c){var n=c("b622"),r=n("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(c){try{return t[r]=!1,"/./"[e](t)}catch(n){}}return!1}},b6d4:function(e,t,c){"use strict";c.r(t);c("caad"),c("2532");var n=c("7a23"),r=Object(n["createElementVNode"])("section",{class:"favorite bg-banner position-relative"},[Object(n["createElementVNode"])("h2",{class:"position-absolute bg-light bg-opacity-25 text-white text-center top-50 start-50 translate-middle w-75 w-lg-50 p-3 py-4","data-aos":"fade-up","data-aos-offset":"0"},[Object(n["createElementVNode"])("p",null,"快把「收藏」帶回家，重拾你的好心情")])],-1),o={class:"favorite container"},i={class:"py-6 py-md-7"},a={key:0,class:"row"},s={class:"card"},d=["onClick"],l={class:"card-img-box"},u={key:0,class:"card-tag"},p=["src","alt"],f={class:"card-body text-center"},b={class:"card-title d-flex justify-content-center align-items-center text-primary"},m={key:0,class:"material-icons-outlined me-2"},h={class:"card-text mb-4"},v={class:"text-danger fs-4 fw-bold"},g={key:0,class:"text-light ms-2"},O={class:"btn-group d-flex justify-content-center"},j=["disabled","onClick"],y={key:0,class:"material-icons-outlined align-middle"},k={key:1,class:"material-icons-outlined align-middle"},x=["disabled","onClick"],E={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},N=Object(n["createElementVNode"])("span",{class:"visually-hidden"},"Loading...",-1),V=[N],S=Object(n["createTextVNode"])(" 加入購物車 "),w={key:1,class:"text-center"},B=Object(n["createElementVNode"])("h3",{class:"mb-3"},"還沒有收藏紀錄",-1),C=Object(n["createElementVNode"])("h4",{class:"text-light mb-3"},"快將喜歡的好味道加入到我的最愛吧！",-1),P=Object(n["createTextVNode"])("前往選購"),F={class:"py-6 py-md-7"},$=Object(n["createStaticVNode"])('<div class="d-flex justify-content-center align-items-center mb-5 mb-md-6"><div class="d-none d-md-block bg-primary" style="width:100px;height:2px;"></div><h3 class="d-none d-md-block text-primary mx-4">捲捲 店長推薦</h3><h3 class="d-md-none text-primary border-bottom border-primary border-2 px-2 pb-2">捲捲 店長推薦</h3><div class="d-none d-md-block bg-primary" style="width:100px;height:2px;"></div></div>',1);function D(e,t,c,N,D,L){var _=Object(n["resolveComponent"])("Loading"),A=Object(n["resolveComponent"])("RouterLink"),M=Object(n["resolveComponent"])("Swiper");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createVNode"])(_,{active:D.isLoading,"onUpdate:active":t[0]||(t[0]=function(e){return D.isLoading=e})},null,8,["active"]),r,Object(n["createElementVNode"])("div",o,[Object(n["createElementVNode"])("section",i,[0!==D.favoriteProducts.length?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",a,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(D.favoriteProducts,(function(t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{class:"col-lg-3 col-sm-6",key:t.id},[Object(n["createElementVNode"])("div",s,[Object(n["createElementVNode"])("a",{href:"#",class:"stretched-link",onClick:Object(n["withModifiers"])((function(e){return L.seeProduct(t.id)}),["prevent"])},[Object(n["createElementVNode"])("div",l,[t.origin_price!==t.price?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",u,"On Sale")):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("img",{class:"card-img",src:t.imageUrl,alt:t.title},null,8,p)])],8,d),Object(n["createElementVNode"])("div",f,[Object(n["createElementVNode"])("div",b,[t.is_recommend?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",m,"recommend")):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("h5",null,Object(n["toDisplayString"])(t.title),1)]),Object(n["createElementVNode"])("p",h,[Object(n["createElementVNode"])("span",v,"$ "+Object(n["toDisplayString"])(t.price)+" 元",1),t.origin_price!==t.price?(Object(n["openBlock"])(),Object(n["createElementBlock"])("del",g,"$ "+Object(n["toDisplayString"])(t.origin_price)+" 元 ",1)):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",O,[Object(n["createElementVNode"])("button",{type:"button",class:"btn btn-outline-danger py-2 px-1 z-20",disabled:D.isSpinner,onClick:function(c){return e.toggleFavorite(t.id)}},[e.favorite.includes(t.id)?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",y,"favorite")):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",k,"favorite_border"))],8,j),Object(n["createElementVNode"])("button",{type:"button",disabled:D.isSpinner,class:"btn btn-primary py-2 px-5 z-20",onClick:function(e){return L.addCart(t.id)}},[t.id===D.isSpinner?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",E,V)):Object(n["createCommentVNode"])("",!0),S],8,x)])])])])})),128))])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",w,[B,C,Object(n["createVNode"])(A,{to:"/products",class:"btn btn-primary px-5 py-2"},{default:Object(n["withCtx"])((function(){return[P]})),_:1})]))]),Object(n["createElementVNode"])("section",F,[$,Object(n["createVNode"])(M,{"filter-products":D.recommendProducts,"data-aos":"zoom-in-left"},null,8,["filter-products"])])])],64)}c("99af"),c("d3b7"),c("159b"),c("4de4");var L=c("89ba"),_=c("8419"),A={data:function(){return{products:[],favoriteProducts:[],recommendProducts:[],isLoading:!1,isSpinner:!1}},components:{Swiper:_["a"]},mixins:[L["a"]],methods:{getProducts:function(){var e=this;this.isLoading=!0;var t="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("gillchin","/products/all");this.$http.get(t).then((function(t){e.products=t.data.products,e.filterFavoriteProducts(),e.filterRecommendProducts(),e.isLoading=!1})).catch((function(t){e.$httpMessageState(t.response,"錯誤訊息")}))},filterFavoriteProducts:function(){var e=this;this.favorite.forEach((function(t){var c=e.products.filter((function(e){return e.id===t}));e.favoriteProducts.push(c[0])}))},addCart:function(e){var t=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.isSpinner=e;var n="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("gillchin","/cart"),r={product_id:e,qty:c};this.$http.post(n,{data:r}).then((function(e){t.isSpinner=!1,t.$httpMessageState(e,"加入購物車"),t.$emitter.emit("get-cart")})).catch((function(e){t.$httpMessageState(e.response,"加入購物車"),t.isSpinner=!1}))},seeProduct:function(e){this.$router.push("/product/".concat(e))},filterRecommendProducts:function(){this.recommendProducts=this.products.filter((function(e){return 1===e.is_recommend}))}},watch:{favorite:{handler:function(){this.favoriteProducts=[],this.filterFavoriteProducts()},deep:!0}},mounted:function(){this.getProducts()}},M=c("6b0d"),I=c.n(M);const J=I()(A,[["render",D]]);t["default"]=J},c740:function(e,t,c){"use strict";var n=c("23e7"),r=c("b727").findIndex,o=c("44d2"),i="findIndex",a=!0;i in[]&&Array(1)[i]((function(){a=!1})),n({target:"Array",proto:!0,forced:a},{findIndex:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),o(i)},caad:function(e,t,c){"use strict";var n=c("23e7"),r=c("4d64").includes,o=c("44d2");n({target:"Array",proto:!0},{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),o("includes")},e9c4:function(e,t,c){var n=c("23e7"),r=c("da84"),o=c("d066"),i=c("2ba4"),a=c("e330"),s=c("d039"),d=r.Array,l=o("JSON","stringify"),u=a(/./.exec),p=a("".charAt),f=a("".charCodeAt),b=a("".replace),m=a(1..toString),h=/[\uD800-\uDFFF]/g,v=/^[\uD800-\uDBFF]$/,g=/^[\uDC00-\uDFFF]$/,O=function(e,t,c){var n=p(c,t-1),r=p(c,t+1);return u(v,e)&&!u(g,r)||u(g,e)&&!u(v,n)?"\\u"+m(f(e,0),16):e},j=s((function(){return'"\\udf06\\ud834"'!==l("\udf06\ud834")||'"\\udead"'!==l("\udead")}));l&&n({target:"JSON",stat:!0,forced:j},{stringify:function(e,t,c){for(var n=0,r=arguments.length,o=d(r);n<r;n++)o[n]=arguments[n];var a=i(l,null,o);return"string"==typeof a?b(a,h,O):a}})}}]);
//# sourceMappingURL=chunk-ebd62fcc.79631124.js.map