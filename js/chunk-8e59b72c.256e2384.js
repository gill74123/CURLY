(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8e59b72c"],{"00b4":function(e,t,a){"use strict";a("ac1f");var c=a("23e7"),n=a("da84"),r=a("c65b"),o=a("e330"),l=a("1626"),s=a("861d"),i=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),d=n.Error,m=o(/./.test);c({target:"RegExp",proto:!0,forced:!i},{test:function(e){var t=this.exec;if(!l(t))return m(this,e);var a=r(t,this,e);if(null!==a&&!s(a))throw new d("RegExp exec method returned something other than an Object or null");return!!a}})},"107c":function(e,t,a){var c=a("d039"),n=a("da84"),r=n.RegExp;e.exports=c((function(){var e=r("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},9263:function(e,t,a){"use strict";var c=a("c65b"),n=a("e330"),r=a("577e"),o=a("ad6d"),l=a("9f7f"),s=a("5692"),i=a("7c73"),d=a("69f3").get,m=a("fce3"),u=a("107c"),b=s("native-string-replace",String.prototype.replace),p=RegExp.prototype.exec,f=p,j=n("".charAt),O=n("".indexOf),g=n("".replace),x=n("".slice),v=function(){var e=/a/,t=/b*/g;return c(p,e,"a"),c(p,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),V=l.BROKEN_CARET,E=void 0!==/()??/.exec("")[1],N=v||E||V||m||u;N&&(f=function(e){var t,a,n,l,s,m,u,N=this,h=d(N),y=r(e),D=h.raw;if(D)return D.lastIndex=N.lastIndex,t=c(f,D,y),N.lastIndex=D.lastIndex,t;var k=h.groups,w=V&&N.sticky,S=c(o,N),C=N.source,T=0,B=y;if(w&&(S=g(S,"y",""),-1===O(S,"g")&&(S+="g"),B=x(y,N.lastIndex),N.lastIndex>0&&(!N.multiline||N.multiline&&"\n"!==j(y,N.lastIndex-1))&&(C="(?: "+C+")",B=" "+B,T++),a=new RegExp("^(?:"+C+")",S)),E&&(a=new RegExp("^"+C+"$(?!\\s)",S)),v&&(n=N.lastIndex),l=c(p,w?a:N,B),w?l?(l.input=x(l.input,T),l[0]=x(l[0],T),l.index=N.lastIndex,N.lastIndex+=l[0].length):N.lastIndex=0:v&&l&&(N.lastIndex=N.global?l.index+l[0].length:n),E&&l&&l.length>1&&c(b,l[0],a,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(l[s]=void 0)})),l&&k)for(l.groups=m=i(null),s=0;s<k.length;s++)u=k[s],m[u[0]]=l[u[1]];return l}),e.exports=f},"99af":function(e,t,a){"use strict";var c=a("23e7"),n=a("da84"),r=a("d039"),o=a("e8b5"),l=a("861d"),s=a("7b0b"),i=a("07fa"),d=a("8418"),m=a("65f0"),u=a("1dde"),b=a("b622"),p=a("2d00"),f=b("isConcatSpreadable"),j=9007199254740991,O="Maximum allowed index exceeded",g=n.TypeError,x=p>=51||!r((function(){var e=[];return e[f]=!1,e.concat()[0]!==e})),v=u("concat"),V=function(e){if(!l(e))return!1;var t=e[f];return void 0!==t?!!t:o(e)},E=!x||!v;c({target:"Array",proto:!0,forced:E},{concat:function(e){var t,a,c,n,r,o=s(this),l=m(o,0),u=0;for(t=-1,c=arguments.length;t<c;t++)if(r=-1===t?o:arguments[t],V(r)){if(n=i(r),u+n>j)throw g(O);for(a=0;a<n;a++,u++)a in r&&d(l,u,r[a])}else{if(u>=j)throw g(O);d(l,u++,r)}return l.length=u,l}})},"9f7f":function(e,t,a){var c=a("d039"),n=a("da84"),r=n.RegExp,o=c((function(){var e=r("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),l=o||c((function(){return!r("a","y").sticky})),s=o||c((function(){var e=r("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:s,MISSED_STICKY:l,UNSUPPORTED_Y:o}},ac1f:function(e,t,a){"use strict";var c=a("23e7"),n=a("9263");c({target:"RegExp",proto:!0,forced:/./.exec!==n},{exec:n})},ad6d:function(e,t,a){"use strict";var c=a("825a");e.exports=function(){var e=c(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},b0c0:function(e,t,a){var c=a("83ab"),n=a("5e77").EXISTS,r=a("e330"),o=a("9bf2").f,l=Function.prototype,s=r(l.toString),i=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,d=r(i.exec),m="name";c&&!n&&o(l,m,{configurable:!0,get:function(){try{return d(i,s(this))[1]}catch(e){return""}}})},b84e:function(e,t,a){"use strict";a.r(t);a("b0c0");var c=a("7a23"),n={class:"order container py-6 py-md-7"},r={class:"row g-5 py-6 py-md-7"},o={class:"col-md-6 mb-4"},l=Object(c["createElementVNode"])("div",{class:"d-flex border-bottom pb-2 mb-5"},[Object(c["createElementVNode"])("h5",{class:"text-primary fw-bold"},"購物車詳情")],-1),s={class:"row g-0"},i={class:"col-3"},d=["src","alt"],m={class:"col-6 text-dark"},u={class:"card-body d-flex flex-column justify-content-between h-100 py-0 px-2"},b={class:"card-title fw-medium m-0"},p={class:"card-text"},f={class:"col-3 align-self-center text-end"},j={class:"card-text"},O=Object(c["createElementVNode"])("hr",null,null,-1),g={class:"input-group mb-4"},x=["disabled"],v={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},V=Object(c["createElementVNode"])("span",{class:"visually-hidden"},"Loading...",-1),E=[V],N=Object(c["createTextVNode"])(" 套用優惠券 "),h={key:0},y={class:"text-danger mb-2"},D={class:"d-flex justify-content-between text-light mb-2"},k=Object(c["createTextVNode"])(" 折抵購物金 "),w={key:0,class:"d-flex justify-content-between text-light mb-2"},S=Object(c["createTextVNode"])(" 運費 "),C=Object(c["createElementVNode"])("span",null,"+NT$ 60",-1),T=[S,C],B={class:"d-flex justify-content-between fw-medium fs-4"},$=Object(c["createTextVNode"])(" 總金額 "),I={key:0},_={key:1},R={key:1},M={class:"d-flex justify-content-between fw-medium fs-4"},U=Object(c["createTextVNode"])(" 總金額 "),L={key:0},z={key:1},A={class:"col-md-6"},F=Object(c["createElementVNode"])("h5",{class:"border-bottom text-primary fw-bold pb-2 mb-2"},"訂購人資訊",-1),q={class:"mb-3"},P=Object(c["createElementVNode"])("label",{for:"Email",class:"form-label"},[Object(c["createElementVNode"])("span",{class:"text-danger"},"*"),Object(c["createTextVNode"])(" Email")],-1),K={class:"mb-3"},J=Object(c["createElementVNode"])("label",{for:"name",class:"form-label"},[Object(c["createElementVNode"])("span",{class:"text-danger"},"*"),Object(c["createTextVNode"])(" 收件人")],-1),Y={class:"mb-3"},X=Object(c["createElementVNode"])("label",{for:"tel",class:"form-label"},[Object(c["createElementVNode"])("span",{class:"text-danger"},"*"),Object(c["createTextVNode"])(" 電話")],-1),G={class:"mb-3"},H=Object(c["createElementVNode"])("label",{for:"address",class:"form-label"},[Object(c["createElementVNode"])("span",{class:"text-danger"},"*"),Object(c["createTextVNode"])(" 收件地址")],-1),Q={class:"mb-4"},W=Object(c["createElementVNode"])("label",{for:"message",class:"form-label"},"留言",-1),Z={class:"text-end"},ee=["disabled"];function te(e,t,a,V,S,C){var te=Object(c["resolveComponent"])("Loading"),ae=Object(c["resolveComponent"])("Timeline"),ce=Object(c["resolveComponent"])("Field"),ne=Object(c["resolveComponent"])("ErrorMessage"),re=Object(c["resolveComponent"])("Form");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createVNode"])(te,{active:S.isLoading,"onUpdate:active":t[0]||(t[0]=function(e){return S.isLoading=e})},null,8,["active"]),Object(c["createElementVNode"])("div",n,[Object(c["createVNode"])(ae),Object(c["createElementVNode"])("div",r,[Object(c["createElementVNode"])("div",o,[l,(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(S.cartData.carts,(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{class:"card mb-2",key:e.id},[Object(c["createElementVNode"])("div",s,[Object(c["createElementVNode"])("div",i,[Object(c["createElementVNode"])("img",{class:"card-img img-fluid rounded-start",src:e.product.imageUrl,alt:e.product.title},null,8,d)]),Object(c["createElementVNode"])("div",m,[Object(c["createElementVNode"])("div",u,[Object(c["createElementVNode"])("h5",b,Object(c["toDisplayString"])(e.product.title),1),Object(c["createElementVNode"])("p",p,"x "+Object(c["toDisplayString"])(e.qty),1)])]),Object(c["createElementVNode"])("div",f,[Object(c["createElementVNode"])("p",j,"NT$ "+Object(c["toDisplayString"])(e.total),1)])])])})),128)),O,Object(c["createElementVNode"])("div",g,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text",class:"form-control",placeholder:"輸入優惠代碼","onUpdate:modelValue":t[1]||(t[1]=function(e){return S.couponCode=e})},null,512),[[c["vModelText"],S.couponCode,void 0,{trim:!0}]]),Object(c["createElementVNode"])("button",{class:"btn btn-outline-primary py-2",type:"button",disabled:S.isSpinner||""===S.couponCode,onClick:t[2]||(t[2]=function(e){return C.addCoupon(S.couponCode)})},[S.isSpinner?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",v,E)):Object(c["createCommentVNode"])("",!0),N],8,x)]),S.is_Discount||S.cartData.total!==S.cartData.final_total?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",h,[Object(c["createElementVNode"])("p",y,Object(c["toDisplayString"])(S.couponData.message),1),Object(c["createElementVNode"])("p",D,[k,Object(c["createElementVNode"])("span",null,"-NT$ "+Object(c["toDisplayString"])(S.cartData.total-S.cartData.final_total),1)]),S.cartData.final_total<1e3?(Object(c["openBlock"])(),Object(c["createElementBlock"])("p",w,T)):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("p",B,[$,S.cartData.final_total<1e3?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",I,"NT$ "+Object(c["toDisplayString"])(S.cartData.final_total+60),1)):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",_,"NT$ "+Object(c["toDisplayString"])(S.cartData.final_total),1))])])):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",R,[Object(c["createElementVNode"])("p",M,[U,S.cartData.final_total<1e3?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",L,"NT$ "+Object(c["toDisplayString"])(S.cartData.total+60),1)):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",z,"NT$ "+Object(c["toDisplayString"])(S.cartData.total),1))])]))]),Object(c["createElementVNode"])("div",A,[F,Object(c["createVNode"])(re,{class:"py-3",onSubmit:C.addOrder},{default:Object(c["withCtx"])((function(e){var a=e.errors;return[Object(c["createElementVNode"])("div",q,[P,Object(c["createVNode"])(ce,{type:"email",class:Object(c["normalizeClass"])(["form-control",{"is-invalid":a["Email"]}]),id:"Email",name:"Email",placeholder:"請輸入 Email",modelValue:S.formData.user.email,"onUpdate:modelValue":t[3]||(t[3]=function(e){return S.formData.user.email=e}),rules:"email|required"},null,8,["modelValue","class"]),Object(c["createVNode"])(ne,{name:"Email",class:"invalid-feedback"})]),Object(c["createElementVNode"])("div",K,[J,Object(c["createVNode"])(ce,{type:"text",class:Object(c["normalizeClass"])(["form-control",{"is-invalid":a["收件人"]}]),id:"name",name:"收件人",placeholder:"請輸入姓名",modelValue:S.formData.user.name,"onUpdate:modelValue":t[4]||(t[4]=function(e){return S.formData.user.name=e}),rules:"required"},null,8,["modelValue","class"]),Object(c["createVNode"])(ne,{name:"收件人",class:"invalid-feedback"})]),Object(c["createElementVNode"])("div",Y,[X,Object(c["createVNode"])(ce,{type:"tel",class:Object(c["normalizeClass"])(["form-control",{"is-invalid":a["電話"]}]),id:"tel",name:"電話",placeholder:"請輸入電話",modelValue:S.formData.user.tel,"onUpdate:modelValue":t[5]||(t[5]=function(e){return S.formData.user.tel=e}),rules:C.isPhone},null,8,["modelValue","class","rules"]),Object(c["createVNode"])(ne,{name:"電話",class:"invalid-feedback"})]),Object(c["createElementVNode"])("div",G,[H,Object(c["createVNode"])(ce,{type:"text",class:Object(c["normalizeClass"])(["form-control",{"is-invalid":a["收件地址"]}]),id:"address",name:"收件地址",placeholder:"請輸入收件地址",modelValue:S.formData.user.address,"onUpdate:modelValue":t[6]||(t[6]=function(e){return S.formData.user.address=e}),rules:"required"},null,8,["modelValue","class"]),Object(c["createVNode"])(ne,{name:"收件地址",class:"invalid-feedback"})]),Object(c["createElementVNode"])("div",Q,[W,Object(c["createVNode"])(ce,{type:"text",class:"form-control",id:"message",name:"留言",cols:"30",rows:"10",modelValue:S.formData.message,"onUpdate:modelValue":t[7]||(t[7]=function(e){return S.formData.message=e}),as:"textarea"},null,8,["modelValue"])]),Object(c["createElementVNode"])("div",Z,[Object(c["createElementVNode"])("button",{type:"submit",class:"btn btn-primary w-100 w-lg-25 py-2",disabled:S.isSpinner},"送出訂單",8,ee)])]})),_:1},8,["onSubmit"])])])])],64)}a("99af"),a("ac1f"),a("00b4");var ae=a("da9e"),ce={data:function(){return{cartData:{carts:[]},couponData:{data:{}},couponCode:"",is_Discount:!1,formData:{user:{}},isLoading:!1,isSpinner:!1}},components:{Timeline:ae["a"]},methods:{addCoupon:function(e){var t=this;this.isSpinner=!0;var a="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("gillchin","/coupon"),c={code:e};this.$http.post(a,{data:c}).then((function(e){t.couponData=e.data,t.is_Discount=!0,t.couponCode="",t.$httpMessageState(e,"使用優惠券"),t.isSpinner=!1})).catch((function(e){t.$httpMessageState("errMessage",e.response.data.message),t.isSpinner=!1}))},addOrder:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("gillchin","/order"),a=this.formData;this.$http.post(t,{data:a}).then((function(t){e.is_Discount=!0,e.$emitter.emit("get-cart"),e.formData={user:{}},e.$httpMessageState(t,"訂單建立");var a=t.data.orderId;e.$router.push("/pay/".concat(a))})).catch((function(t){e.$httpMessageState("errMessage",t.response.data.message)}))},isPhone:function(e){if(void 0===e)return"電話 為必填";var t=/^(09)[0-9]{8}$/;return!!t.test(e)||"須為正確的電話號碼"}},watch:{is_Discount:function(){var e=this;this.$emitter.emit("get-cart"),this.$emitter.on("get-cart-data",(function(t){e.cartData=t,e.isLoading=!1}))}},mounted:function(){var e=this;this.isLoading=!0,this.$emitter.emit("get-cart"),this.$emitter.on("get-cart-data",(function(t){e.cartData=t,e.isLoading=!1}))}},ne=a("6b0d"),re=a.n(ne);const oe=re()(ce,[["render",te]]);t["default"]=oe},da9e:function(e,t,a){"use strict";var c=a("7a23"),n={class:"timeline d-flex justify-content-center list-unstyled m-0"},r=Object(c["createElementVNode"])("li",{class:"timeline-item active"},[Object(c["createElementVNode"])("p",{class:"timeline-pointer"},"1"),Object(c["createTextVNode"])(" 訂單確認 ")],-1),o=Object(c["createElementVNode"])("p",{class:"timeline-pointer"},"2",-1),l=Object(c["createTextVNode"])(" 訂單建立 "),s=[o,l],i=Object(c["createElementVNode"])("p",{class:"timeline-pointer"},"3",-1),d=Object(c["createTextVNode"])(" 完成訂單 "),m=[i,d];function u(e,t,a,o,l,i){var d,u;return Object(c["openBlock"])(),Object(c["createElementBlock"])("ul",n,[r,Object(c["createElementVNode"])("li",{class:Object(c["normalizeClass"])(["timeline-item",null!==(d=a.order)&&void 0!==d&&d.id?"active":""])},s,2),Object(c["createElementVNode"])("li",{class:Object(c["normalizeClass"])(["timeline-item",null!==(u=a.order)&&void 0!==u&&u.is_paid?"active":""])},m,2)])}var b={props:["order"]},p=a("6b0d"),f=a.n(p);const j=f()(b,[["render",u]]);t["a"]=j},fce3:function(e,t,a){var c=a("d039"),n=a("da84"),r=n.RegExp;e.exports=c((function(){var e=r(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))}}]);
//# sourceMappingURL=chunk-8e59b72c.256e2384.js.map